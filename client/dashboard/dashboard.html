<div flex layout="column" layout-align="" class="container">

  <div layout-sm="column" layout-gt-sm="row" layout-align-gt-sm="space-around" layout-xs="column"  layout-align-xs="start start" class="md-padding" id="top-container">
    <div flex layout>
      <div ng-if="currentUser.accessLevel !='regional'" flex="100" layout="column" layout-align="start">
        <div layout layout-align="end center" style="margin-top:2.5rem;">
          <div ng-if="currentUser.accessLevel == 'group'" layout="column" layout-align="center center">
            <md-button layout layout-align="center center" class="md-fab md-mini md-icon-button md-warn" ng-click="sendGroupReminder()"><i class="material-icons" style="font-size:18px;">chat_bubble_outline</i></md-button>
            <span class="md-caption">Group Reminder</span>
          </div>
        </div>
        <div layout="column" layout-align="start" id="inject-box-1"
             style="margin-top:1rem;">
          <md-progress-circular md-mode="indeterminate"></md-progress-circular>

        </div>
        <table>
          <thead>
          <th>Employee</th>
          <th>Current</th>
          </thead>
          <tbody>
          <tr ng-repeat="e in employees">
            <td>{{ e.lname }}, {{e.fname }}</td>
            <td>
              <div ng-if="e.status" layout layout-align="center center" class="confirmation-icon">
                <i class="material-icons">done</i></div>
            </td>
          </tr>
          </tbody>
        </table>
      </div><!--account or group-->
     <div flex layout>
       <div ng-if="currentUser.accessLevel =='regional'" flex layout="column" layout-align="start">
         <div layout="column" layout-align="start" id="state-box" style="margin-top:2.5rem;"></div>
         <canvas ng-if="chart==0" id="bar1" class="chart-horizontal-bar"
                 chart-options="options" chart-legend="true" chart-data="TXData" chart-labels="TXLabels">
         </canvas>
         <canvas ng-if="chart==1" id="bar2" class="chart-horizontal-bar"
                 chart-options="options" chart-legend="true" chart-data="KYData" chart-labels="KYLabel">
         </canvas>
         <div layout="column" layout-align="start" id="state-box-2" style="margin-top:2.5rem;"></div>
         <canvas ng-if="chart==1" id="bar3" class="chart-horizontal-bar"
                 chart-options="options" chart-legend="true" chart-data="MSData" chart-labels="MSLabel">
         </canvas>
       </div><!--regional-->
     </div>


    </div>
    <div flex-xs layout-xs hide-gt-xs >
      <div  flex-xs="100" flex-order-xs="7" id="sm-state-list" style="background-color: whitesmoke; width:90vw;">

        <md-list flex-xs-grow>
          <md-divider></md-divider>
          <md-list-item><span class="md-title">Texas</span>
            <small class="md-subhead">- {{ TXPercentage | number:0 }} %</small>
          </md-list-item>
          <md-divider></md-divider>
          <md-list-item><span class="md-title">Kentucky</span>
            <small class="md-subhead">- {{ KYPercentage | number:0 }} %</small>
          </md-list-item>
          <md-divider></md-divider>
          <md-list-item><span class="md-title">Mississippi</span>
            <small class="md-subhead">- {{ MSPercentage | number:0 }} %</small>
          </md-list-item>
          <md-divider></md-divider>
        </md-list>
      </div>


    </div><!--small screen-->
    <div hide-xs hide-sm flex-gt-lg="25" flex-gt-md="30" flex-order-sm="1" flex-order-xs="5"  layout="column" layout-align="start center" id="container-two">
      <div ng-if="currentUser.accessLevel =='regional'" layout="column" style="border:solid thin red;width:100%;">
       <div flex layout>
         <div><md-select><md-option></md-option></md-select></div>
         <div ng-if="currentUser.accessLevel == 'regional'" layout="column" layout-align="center center">
           <md-button layout layout-align="center center" class="md-fab md-mini md-icon-button md-warn" ng-click="sendRegionalReminder()"><i class="material-icons" style="font-size:18px;">chat_bubble_outline</i></md-button>
           <span class="md-caption">Group Reminder</span>
         </div>
       </div>
        <div flex layout>
          <table><thead><th>Employee</th></thead><tbody><tr ng-repeat="e in employeesWithoutConfirmations"><td>{{e.lname}} ,{{e.fname}}</td></tr></tbody></table>
        </div>
        <div flex layout>New Block</div>
      </div>
      <div ng-controller="DashboardController" layout="column" layout-align-sm="center center"
           id="confirmation-box"  >
        <div flex-66 layout >
          <div ng-if="statusCurrent" layout layout-align="center center" class="confirmation-icon"><i class="material-icons">done</i></div>
          <div layout layout-align="start" id="status">
            <md-progress-circular class="md-hue-4" md-mode="indeterminate">
            </md-progress-circular>
          </div>
        </div>

        <div ng-if="!statusCurrent && msgStatus == 0 && msgShow == 2 "></div>
        <div ng-if="!statusCurrent && msgStatus == 0 && msgShow != 2">
          <div layout><p flex class="md-subhead"><strong>Confirm Installation</strong></p></div>
          <md-checkbox ng-model="status" ng-change="createConfirmation()">I have successfully <u>installed</u> this update.</md-checkbox>
        </div>
        <div ng-if="msgStatus == 2">
        </div>
        <div ng-if="msgStatus==1">
          <span class="md-body-1">Your confirmation has been saved!</span>
        </div>
      </div>
      <div hide-xs hide-sm ng-controller="IssueReportController" layout="column" id="issue-tracker-form">
        <div flex>
          <div flex flex-xs="100" layout>
            <div>
              <div layout="column">
                <h6 class="md-subhead title" style="">Issue Tracker</h6>
                <div  flex-xs="100" layout="column" layout-align="center center" class="md-padding"
                      id="issue-form-background">

                  <div flex ng-if="msgStatus == 0" >
                    <form flex layout="column" name="reportIssueForm"
                          ng-submit="report(update.issue,issue.comments)">
                      <md-input-container>
                        <label>I am unable to...</label>
                        <md-select ng-model="update.issue" required aria-label="issue report" id="select-field">
                          <md-option ng-repeat="issue in issueType" value="{{issue}}">{{issue}}</md-option>
                        </md-select>
                      </md-input-container>
                      <div  layout layout-align="center">
                        <textarea flex="90"  ng-model="issue.comments" name="comments" id="comments" cols="10" rows="4"></textarea>
                      </div>
                      <div layout layout-align="center start">
                        <md-button class="md-raised md-primary" id="issue-tracker-button" type="submit" ng-disabled="reportIssueForm.$invalid">Submit</md-button>
                      </div>
                    </form>
                  </div>
                  <div ng-if="msgStatus==1">
                    <p>{{ confirmation }}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div><!--End of section -->
  </div>
  <div ng-if="currentUser.accessLevel =='region'" flex layout="column" layout-align="center" id="bottom-container">
    <div flex layout="column">
      <div layout layout-align="center" class="md-padding" id="results-title">
        <span class="md-title">Results Table</span>
      </div>
      <div layout="column" class="md-padding">
        <div>
          <div layout="column" layout-align-sm="space-between">
            <div layout id="filter-bar">
              <div hide-xs flex="25" layout layout-align="center center">
                <span  class="md-icon">
                  <i class="material-icons">filter_list</i>
                </span>
                <span>Filter</span>
              </div>
              <div flex="25" flex-xs="33" layout layout-align="center center">
                <span hide-sm hide-xs class="md-body-2">Filter By State</span>
                <md-select style="margin:0 1rem!important;" ng-model="searchCriteria" aria-label="states"
                           placeholder="State">
                  <md-option ng-repeat="state in states" value="{{ state }}">{{ state }}</md-option>
                </md-select>
              </div>
              <div flex="25" flex-xs="33" layout layout-align="center center">
                <span hide-sm hide-xs class="md-body-2">Filter By Group</span>
                <md-select style="margin:0 1rem!important;" ng-model="searchCriteria" aria-label="groups"
                           placeholder="Group">
                  <md-option ng-repeat="group in groups" value="{{ group }}">{{ group }}</md-option>
                </md-select>
              </div>
              <div flex="25" flex-xs="33" layout layout-align="center center" >
                  <span class="md-icon">
                    <a href="#" class="md-body-2" ng-click="searchCriteria=''">Clear Filter</a>
                  </span>
              </div>
            </div>
            <div>
              <div layout layout-align="end">
                <div layout="column" class="md-padding">
                  <p class="md-caption">Statewide</p>
                  <md-button class="md-fab md-mini md-warn md-icon-button" ng-click="sendReminder()"><i class="material-icons">chat_bubble_outline</i></md-button>

                </div>
                <div>

                </div>
              </div>
            </div>

            <div>
              <md-tabs md-dynamic-height>
                <md-tab label="Unconfirmed">
                  <div id="unconfirmed-contianer">
                    <table>
                      <thead fix-head>
                      <tr>
                        <th class="md-body-2">
                          <a layout layout-align="start center" href="#"
                             ng-click="sortOption='lname'; sortReverse = !sortReverse">Name
                            <span ng-if="sortOption=='lname' && !sortReverse">
                              <i class="material-icons">arrow_drop_down</i></span>
                            <span ng-if="sortOption=='lname' && sortReverse"><i class="material-icons">arrow_drop_up</i></span></a>
                        </th>
                        <th hide-sm hide-xs class="md-body-2">
                          <a layout layout-align="start center" href="#"
                             ng-click="sortOption='state'; sortReverse = !sortReverse">State
                            <span ng-if="sortOption=='state' && !sortReverse"><i
                              class="material-icons">arrow_drop_down</i></span>
                            <span ng-if="sortOption=='state' && sortReverse"><i class="material-icons">arrow_drop_up</i></span></a>

                        </th>
                        <th class="md-body-2"><a layout layout-align="start center" href="#"
                                                 ng-click="sortOption='group.title'; sortReverse = !sortReverse">Group
                          <span ng-if="sortOption=='group.title' && !sortReverse"><i class="material-icons">arrow_drop_down</i></span>
                          <span ng-if="sortOption=='group.title' && sortReverse"><i
                            class="material-icons">arrow_drop_up</i></span></a></th>

                        <th layout layout-align-sm="start start" class="md-body-2">Reminder</th>
                      </tr>
                      </thead>
                      <tbody flex>
                      <tr ng-repeat="e in employeesWithoutConfirmations | orderBy:sortOption:sortReverse | filter:searchCriteria">

                        <td class="md-body-1"> {{ e.lname}}, {{e.fname}}</td>
                        <td hide-sm hide-xs class="md-body-1">{{ e.state.title }}</td>
                        <td class="md-body-1">{{ e.group.title }}</td>
                        <td ><md-button href="#" ng-click="sendEmail(e.member.email, e.stateId)" class="md-mini md-icon-button"><i class="material-icons" style="color:rgb(0,164,239);">chat_bubble</i></md-button>
                        </td>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                </md-tab>
                <md-tab label="Confirmed">
                  <div style="overflow: auto; max-height: 400px">
                    <table flex>
                      <thead fix-head flex>

                      <th class="md-body-2">
                        <a layout layout-align="start center" href="#"
                           ng-click="sortOption='lname'; sortReverse = !sortReverse">Name
                          <span ng-if="sortOption=='lname' && !sortReverse"><i
                            class="material-icons">arrow_drop_down</i></span>
                          <span ng-if="sortOption=='lname' && sortReverse"><i
                            class="material-icons">arrow_drop_up</i></span></a></th>
                      <th class="md-body-2">
                        <a layout layout-align="start center" href="#"
                           ng-click="sortOption='state'; sortReverse = !sortReverse">State
                          <span ng-if="sortOption=='state' && !sortReverse"><i
                            class="material-icons">arrow_drop_down</i></span>
                          <span ng-if="sortOption=='state' && sortReverse"><i
                            class="material-icons">arrow_drop_up</i></span></a>

                      </th>
                      <th class="md-body-2"><a layout layout-align="start center" href="#"
                                               ng-click="sortOption='group.title'; sortReverse = !sortReverse">Group
                        <span ng-if="sortOption=='group.title' && !sortReverse"><i class="material-icons">arrow_drop_down</i></span>
                        <span ng-if="sortOption=='group.title' && sortReverse"><i
                          class="material-icons">arrow_drop_up</i></span></a></th>
                      </thead>

                      <tr
                        ng-repeat="e in employeesWithConfirmations | orderBy:sortOption:sortReverse | filter:searchCriteria">

                        <td class="md-body-1" > {{ e.lname }}, {{e.fname}}</td>
                        <td class="md-body-1" >{{ e.state.title }}</td>
                        <td class="md-body-1" >{{ e.group.title }}</td>

                      </tr>
                    </table>

                  </div>
                </md-tab>
              </md-tabs>
            </div>

          </div>

        </div>
      </div>
    </div>
  </div>
</div>
